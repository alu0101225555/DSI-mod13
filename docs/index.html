<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101225555</title><meta name="description" content="Documentation for ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101225555"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101225555</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101225555 </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#práctica-11" id="práctica-11" style="color: inherit; text-decoration: none;">
  <h3>Práctica 11</h3>
</a>
<p>Noelia Ibáñez Silvestre</p>
<p>alu0101225555</p>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101225555?branch=master"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101225555/badge.svg?branch=master" alt="Coverage Status"></a></p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101225555/actions/workflows/sonarcloud.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101225555/actions/workflows/sonarcloud.yml/badge.svg" alt="Sonar-Cloud"></a></p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101225555/actions/workflows/node.js.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct11-async-sockets-alu0101225555/actions/workflows/node.js.yml/badge.svg" alt="Tests"></a></p>

<a href="#introducción" id="introducción" style="color: inherit; text-decoration: none;">
  <h2>Introducción</h2>
</a>
<p>En esta práctica tendrá que partir de la implementación de la aplicación de procesamiento de notas de texto que llevó a cabo en la Práctica 9 para escribir un servidor y un cliente haciendo uso de los sockets proporcionados por el módulo <code>net</code> de Node.js.</p>

<a href="#desarrollo" id="desarrollo" style="color: inherit; text-decoration: none;">
  <h2>Desarrollo</h2>
</a>
<p>Para llevar a cabo el desarrollo de esta práctica, partimos de una estructura similar a la que desarrollamos en la práctica 9.</p>
<p>A continuación se detallan los archivos y sus especificaciones:</p>
<ul>
<li><strong>note.ts:</strong></li>
</ul>
<p>Define la estructura de una nota y sus respectivos atributos: usuario al que pertenece, título, cuerpo y color de la nota.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Note</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-2">constructor</span><span class="hl-1">(</span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">body</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) {}</span><br/><br/><span class="hl-1">    </span><span class="hl-5">getUser</span><span class="hl-1">(){</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">getTitle</span><span class="hl-1">(){</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">getBody</span><span class="hl-1">(){</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">getColor</span><span class="hl-1">(){</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li><strong>commands.ts:</strong></li>
</ul>
<p>Implementa los comandos que son posibles usar en la aplicación:</p>
<ol>
<li><p><code>addN()</code>: permite añadir una nota a un usuario si existe el directorio, en caso contrario creará dicha carpeta y añadirá la nota. Retornará <code>true</code> si todo ha ido correctamente. </p>
</li>
<li><p><code>modifyN()</code>: permite modificar una nota si existe. En caso de no existir la nota o el directorio del usuario, retornará <code>false</code>.</p>
</li>
<li><p><code>removeN()</code>: permite eliminar una nota de un usuario, comprobando previamente su existencia. Devuelve <code>true</code> si consiguió eliminar dicha nota.</p>
</li>
<li><p><code>readN()</code>:  permite leer una nota determinada. Si la nota existe, devolverá una nueva nota con la información de la nota consultada.</p>
</li>
<li><p><code>listN()</code>: permite listar las notas de un determinado usuario. Si el directorio existe, carga las notas en un array que devolverá posteriormente.</p>
</li>
</ol>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Command</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-2">constructor</span><span class="hl-1">(){}</span><br/><br/><span class="hl-1">    </span><span class="hl-5">addN</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">: </span><span class="hl-3">Note</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">note</span><span class="hl-1">: </span><span class="hl-3">Note</span><span class="hl-1"> = </span><span class="hl-4">userN</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">toJSON</span><span class="hl-1"> = </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-4">note</span><span class="hl-1">, </span><span class="hl-2">null</span><span class="hl-1">, </span><span class="hl-6">2</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">dir</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-7">&quot;../P11/users&quot;</span><span class="hl-1"> + </span><span class="hl-4">userN</span><span class="hl-1">.</span><span class="hl-5">getUser</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">titleJSON</span><span class="hl-1"> = </span><span class="hl-5">removeSpaces</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">.</span><span class="hl-5">getTitle</span><span class="hl-1">());</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">JSONnote</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-4">dir</span><span class="hl-1"> + </span><span class="hl-7">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-4">titleJSON</span><span class="hl-1"> + </span><span class="hl-7">&quot;.json&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-4">dir</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-4">JSONnote</span><span class="hl-1">)) {</span><br/><span class="hl-1">                </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">writeFileSync</span><span class="hl-1">(</span><span class="hl-4">JSONnote</span><span class="hl-1">, </span><span class="hl-4">toJSON</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">mkdirSync</span><span class="hl-1">(</span><span class="hl-4">dir</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">writeFileSync</span><span class="hl-1">(</span><span class="hl-4">JSONnote</span><span class="hl-1">, </span><span class="hl-4">toJSON</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">modifyN</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">: </span><span class="hl-3">Note</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">note</span><span class="hl-1">: </span><span class="hl-3">Note</span><span class="hl-1"> = </span><span class="hl-4">userN</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">toJSON</span><span class="hl-1"> = </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-4">note</span><span class="hl-1">, </span><span class="hl-2">null</span><span class="hl-1">, </span><span class="hl-6">2</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">dir</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-7">&quot;../P11/users&quot;</span><span class="hl-1"> + </span><span class="hl-4">userN</span><span class="hl-1">.</span><span class="hl-5">getUser</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">titleJSON</span><span class="hl-1"> = </span><span class="hl-5">removeSpaces</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">.</span><span class="hl-5">getTitle</span><span class="hl-1">());</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">JSONnote</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-4">dir</span><span class="hl-1"> + </span><span class="hl-7">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-4">titleJSON</span><span class="hl-1"> + </span><span class="hl-7">&quot;.json&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-4">dir</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-4">JSONnote</span><span class="hl-1">)) {</span><br/><span class="hl-1">                </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">writeFileSync</span><span class="hl-1">(</span><span class="hl-4">JSONnote</span><span class="hl-1">, </span><span class="hl-4">toJSON</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">removeN</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">dir</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-7">&quot;../P11/users&quot;</span><span class="hl-1"> + </span><span class="hl-4">userN</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">titleJSON</span><span class="hl-1"> = </span><span class="hl-5">removeSpaces</span><span class="hl-1">(</span><span class="hl-4">title</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">JSONnote</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-4">dir</span><span class="hl-1"> + </span><span class="hl-7">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-4">titleJSON</span><span class="hl-1"> + </span><span class="hl-7">&quot;.json&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-4">dir</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-4">JSONnote</span><span class="hl-1">)) {</span><br/><span class="hl-1">                </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">rmSync</span><span class="hl-1">(</span><span class="hl-4">JSONnote</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">readN</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">title</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">dir</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-7">&quot;../P11/users&quot;</span><span class="hl-1"> + </span><span class="hl-4">userN</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">titleJSON</span><span class="hl-1"> = </span><span class="hl-5">removeSpaces</span><span class="hl-1">(</span><span class="hl-4">title</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">JSONnote</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-4">dir</span><span class="hl-1"> + </span><span class="hl-7">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-4">titleJSON</span><span class="hl-1"> + </span><span class="hl-7">&quot;.json&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">content</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">readFileSync</span><span class="hl-1">(</span><span class="hl-4">JSONnote</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">userNote</span><span class="hl-1"> = </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">salida</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-5">Note</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">, </span><span class="hl-4">userNote</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">userNote</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">userNote</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">salida</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">listN</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">dir</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> = </span><span class="hl-7">&quot;../P11/users&quot;</span><span class="hl-1"> + </span><span class="hl-4">userN</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">userList</span><span class="hl-1">: </span><span class="hl-3">Note</span><span class="hl-1">[] = [];</span><br/><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-4">dir</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">readdirSync</span><span class="hl-1">(</span><span class="hl-4">dir</span><span class="hl-1">).</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-4">note</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">content</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-5">readFileSync</span><span class="hl-1">(</span><span class="hl-4">dir</span><span class="hl-1"> + </span><span class="hl-7">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-4">note</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">userNote</span><span class="hl-1"> = </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><br/><span class="hl-1">                </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">salida</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-5">Note</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">, </span><span class="hl-4">userNote</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">userNote</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">userNote</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><br/><span class="hl-1">                </span><span class="hl-4">userList</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-4">salida</span><span class="hl-1">);</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">userList</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li><strong>types.ts:</strong></li>
</ul>
<p>Define los propios tipos para las peticiones y respuestas del cliente y servidor.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-3">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-4">type</span><span class="hl-1">: </span><span class="hl-7">&#39;add&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;modify&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;remove&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;read&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;list&#39;</span><span class="hl-1"> ;</span><br/><span class="hl-1">    </span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">title</span><span class="hl-1">?: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">body</span><span class="hl-1">?: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">color</span><span class="hl-1">?: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-4">type</span><span class="hl-1">: </span><span class="hl-7">&#39;add&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;modify&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;remove&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;read&#39;</span><span class="hl-1"> | </span><span class="hl-7">&#39;list&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">success</span><span class="hl-1">: </span><span class="hl-3">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">notes</span><span class="hl-1">?: </span><span class="hl-3">Note</span><span class="hl-1">[];</span><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li><strong>client.ts:</strong></li>
</ul>
<p>Establece conexión con el puerto 60300 para, posteriormente, permitir al usuario enviar peticiones al servidor a través del tipo de datos que definimos como <code>requestNote</code> y haciendo uso de <code>yargs</code>. A continuación, el cliente procesa la información recibida del servidor, elige la &quot;opción&quot; correspondiente y finalmente imprime un mensaje de error o éxito. </p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Client</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-2">constructor</span><span class="hl-1">(){</span><br/><span class="hl-1">        </span><span class="hl-8">//let client = net.connect({port:60300});</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-8">/**</span><br/><span class="hl-8">     * Establece la conexión con el puerto 60300</span><br/><span class="hl-8">     */</span><br/><span class="hl-1">     </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-5">connect</span><span class="hl-1">({</span><span class="hl-4">port:</span><span class="hl-6">60300</span><span class="hl-1">});</span><br/><span class="hl-1">     </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-4">eventEmitter</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-5">MessageClient</span><span class="hl-1">(</span><span class="hl-4">client</span><span class="hl-1">);</span><br/><span class="hl-1">     </span><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-4">requestNote</span><span class="hl-1">: </span><span class="hl-3">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">         </span><span class="hl-4">type:</span><span class="hl-7">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">         </span><span class="hl-4">user:</span><span class="hl-1"> </span><span class="hl-7">&#39;&#39;</span><br/><span class="hl-1">    </span><span class="hl-8">/**</span><br/><span class="hl-8">     * Comando: añadir</span><br/><span class="hl-8">     */</span><br/><span class="hl-1">    </span><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-7">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Añadir una nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Usuario de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Título de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            </span><span class="hl-4">body:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Cuerpo de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            </span><span class="hl-4">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Color de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">        </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">                </span><span class="hl-4">requestNote</span><span class="hl-1"> = {</span><br/><span class="hl-1">                    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">user:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">body:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><br/><span class="hl-1">                };</span><br/><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-8">/**</span><br/><span class="hl-8">     * Comando: modificar</span><br/><span class="hl-8">     */</span><br/><span class="hl-1">    </span><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-7">&#39;modify&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Modificar una nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Usuario de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Título de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            </span><span class="hl-4">body:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Cuerpo de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            </span><span class="hl-4">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Color de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">        </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">                </span><span class="hl-4">requestNote</span><span class="hl-1"> = {</span><br/><span class="hl-1">                    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;modify&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">user:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">body:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">color:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><br/><span class="hl-1">                };</span><br/><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-8">/**</span><br/><span class="hl-8">     * Comando: eliminar</span><br/><span class="hl-8">     */</span><br/><span class="hl-1">    </span><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-7">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Eliminar una nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Usuario de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Título de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">                </span><span class="hl-4">requestNote</span><span class="hl-1"> = {</span><br/><span class="hl-1">                    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">user:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">,</span><br/><span class="hl-1">                };</span><br/><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-8">/**</span><br/><span class="hl-8">     * Comando: leer</span><br/><span class="hl-8">     */</span><br/><span class="hl-1">    </span><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-7">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Leer una nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Usuario de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">            </span><span class="hl-4">title:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Título de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">                </span><span class="hl-4">requestNote</span><span class="hl-1"> = {</span><br/><span class="hl-1">                    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">user:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">title:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">,</span><br/><span class="hl-1">                };</span><br/><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-8">/**</span><br/><span class="hl-8">     * Comando: listar</span><br/><span class="hl-8">     */</span><br/><span class="hl-1">    </span><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-7">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Listar las notas de un usuario&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-7">&#39;Usuario de la nota&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">handler</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">typeof</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1"> === </span><span class="hl-7">&#39;string&#39;</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">                </span><span class="hl-4">requestNote</span><span class="hl-1"> = {</span><br/><span class="hl-1">                    </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-4">user:</span><span class="hl-1"> </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">,</span><br/><span class="hl-1">                };</span><br/><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-4">yargs</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">();</span><br/><br/><span class="hl-1">    </span><span class="hl-8">/**</span><br/><span class="hl-8">     * Enviamos la petición al servidor</span><br/><span class="hl-8">     */</span><br/><span class="hl-1">    </span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-4">requestNote</span><span class="hl-1">) + </span><span class="hl-7">&#39;</span><span class="hl-9">\n</span><span class="hl-7">&#39;</span><span class="hl-1">, (</span><span class="hl-4">er</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-4">er</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR en la petición cliente-servidor&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-8">/**</span><br/><span class="hl-8">     * Resultado de la petición cliente-servidor</span><br/><span class="hl-8">     */</span><br/><span class="hl-1">    </span><span class="hl-4">eventEmitter</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-7">&#39;msg&#39;</span><span class="hl-1">, (</span><span class="hl-4">req</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">switch</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;add&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-7">&#39;Nota añadida correctamente&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR al añadir nota&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;modify&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-7">&#39;Nota modificada correctamente&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR al modificar nota&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;remove&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-7">&#39;Nota eliminada correctamente&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR al eliminar nota&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;read&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">colorImpr</span><span class="hl-1"> = </span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">keyword</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">notes</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-5">colorImpr</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">notes</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-4">title</span><span class="hl-1">));</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-5">colorImpr</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">notes</span><span class="hl-1">[</span><span class="hl-6">0</span><span class="hl-1">].</span><span class="hl-4">body</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR al leer nota&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;list&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">colorImpr</span><span class="hl-1">;</span><br/><span class="hl-1">                    </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">notes</span><span class="hl-1">.</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-4">nota</span><span class="hl-1">: </span><span class="hl-3">any</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-4">colorImpr</span><span class="hl-1"> = </span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">keyword</span><span class="hl-1">(</span><span class="hl-4">nota</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><span class="hl-1">                        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-5">colorImpr</span><span class="hl-1">(</span><span class="hl-4">nota</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">));</span><br/><span class="hl-1">                    })</span><br/><span class="hl-1">                }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR al listar las notas&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-0">default</span><span class="hl-1">:</span><br/><span class="hl-1">                </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR. Comando desconocido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-8">/**</span><br/><span class="hl-8">     * Si no se establece conexión, muestra el siguiente mensaje de error</span><br/><span class="hl-8">     */</span><br/><span class="hl-1">    </span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-7">&#39;error&#39;</span><span class="hl-1">, (</span><span class="hl-4">er</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR en la conexión&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li><strong>eventEmitterClient.ts:</strong></li>
</ul>
<p>Clase que hereda de eventEmitter. A diferencia de la parte del servidor que está incluida en la misma clase. </p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">MessageClient</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">EventEmitter</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-2">constructor</span><span class="hl-1">(</span><span class="hl-4">connection</span><span class="hl-1">: </span><span class="hl-3">EventEmitter</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">wholeData</span><span class="hl-1"> = </span><span class="hl-7">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-7">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-4">chunks</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">wholeData</span><span class="hl-1"> += </span><span class="hl-4">chunks</span><span class="hl-1">;</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-7">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-10">req</span><span class="hl-1"> = </span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-4">wholeData</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">emit</span><span class="hl-1">(</span><span class="hl-7">&#39;msg&#39;</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">);</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li><strong>server.ts:</strong></li>
</ul>
<p>Extiende de <code>EventEmitter</code> para poder recibir y enviar eventos a través de sockets. A continuación, establecerá la conexión y analizará con el <code>switch</code> que petición debe realizar a la clase <code>Command</code>.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Server</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">EventEmitter</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-8">/**</span><br/><span class="hl-8">         * Creación del servidor. Es un objeto &#39;socket&#39;</span><br/><span class="hl-8">         */</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-10">server</span><span class="hl-1"> = </span><span class="hl-4">net</span><span class="hl-1">.</span><span class="hl-5">createServer</span><span class="hl-1">({</span><span class="hl-4">allowHalfOpen:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">}, (</span><span class="hl-4">connection</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-8">//let myRequest = &#39;&#39;;</span><br/><span class="hl-1">            </span><span class="hl-8">//connection.on(&#39;data&#39;, (chunk) =&gt; {</span><br/><span class="hl-1">                </span><span class="hl-8">//myRequest += chunk;</span><br/><span class="hl-1">            </span><span class="hl-8">//});</span><br/><br/><span class="hl-1">            </span><span class="hl-8">//console.log(`Cliente conectado`);</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">run</span><span class="hl-1">(</span><span class="hl-4">connection</span><span class="hl-1">);</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-4">server</span><span class="hl-1">.</span><span class="hl-5">listen</span><span class="hl-1">(</span><span class="hl-6">60300</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-7">&#39;Esperando conexión del cliente&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">run</span><span class="hl-1">(</span><span class="hl-4">connection</span><span class="hl-1">: </span><span class="hl-3">net</span><span class="hl-1">.</span><span class="hl-3">Socket</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-7">&#39;Usuario conectado&#39;</span><span class="hl-1">));</span><br/><br/><span class="hl-1">        </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-7">&#39;req&#39;</span><span class="hl-1">, (</span><span class="hl-4">msg</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">req</span><span class="hl-1"> = </span><span class="hl-4">msg</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">userList</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-5">Command</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">response</span><span class="hl-1">: </span><span class="hl-3">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-7">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">success:</span><span class="hl-1"> </span><span class="hl-2">true</span><br/><span class="hl-1">            };</span><br/><br/><span class="hl-1">            </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">userN</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-5">Note</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">body</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">);</span><br/><br/><span class="hl-1">            </span><span class="hl-0">switch</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;add&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> = </span><span class="hl-7">&#39;add&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1">(!</span><span class="hl-4">userList</span><span class="hl-1">.</span><span class="hl-5">addN</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">)) {</span><br/><span class="hl-1">                        </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1"> = </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;modify&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> = </span><span class="hl-7">&#39;modify&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1">(!</span><span class="hl-4">userList</span><span class="hl-1">.</span><span class="hl-5">modifyN</span><span class="hl-1">(</span><span class="hl-4">userN</span><span class="hl-1">)) {</span><br/><span class="hl-1">                        </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1"> = </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;remove&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> = </span><span class="hl-7">&#39;remove&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1">(!</span><span class="hl-4">userList</span><span class="hl-1">.</span><span class="hl-5">removeN</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">userN</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">)) {</span><br/><span class="hl-1">                        </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1"> = </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;read&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> = </span><span class="hl-7">&#39;read&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">                    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">note</span><span class="hl-1"> = </span><span class="hl-4">userList</span><span class="hl-1">.</span><span class="hl-5">readN</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">userN</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">title</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-4">note</span><span class="hl-1">.</span><span class="hl-5">getTitle</span><span class="hl-1">() == </span><span class="hl-7">&quot;&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1"> = </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">                    }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">notes</span><span class="hl-1"> = [</span><span class="hl-4">note</span><span class="hl-1">];</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-7">&#39;list&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> = </span><span class="hl-7">&#39;list&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">                    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">notes</span><span class="hl-1"> = </span><span class="hl-4">userList</span><span class="hl-1">.</span><span class="hl-5">listN</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">userN</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-4">notes</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1"> == </span><span class="hl-6">0</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">success</span><span class="hl-1"> = </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">                    }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                        </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">notes</span><span class="hl-1"> = </span><span class="hl-4">notes</span><span class="hl-1">;</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">default</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR. Comando desconocido&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">            </span><span class="hl-8">/**</span><br/><span class="hl-8">             * Se pasa al JSON</span><br/><span class="hl-8">             */</span><br/><span class="hl-1">            </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-3">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1">), (</span><span class="hl-4">er</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">er</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-7">&#39;ERROR en la solicitud&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                }</span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-7">&#39;Solicitud resuelta&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">                    </span><span class="hl-4">connection</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    </span><span class="hl-8">//});</span><br/><span class="hl-1">}</span><br/><span class="hl-1">}</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-10">a</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-5">Server</span><span class="hl-1">();</span>
</code></pre>

<a href="#conclusión" id="conclusión" style="color: inherit; text-decoration: none;">
  <h2>Conclusión</h2>
</a>
<p>El desarrollo de esta práctica no ha concluido con el resultado esperado ya que contiene fallos con la comunicación entre sockets por parte del cliente.</p>

<a href="#enlaces" id="enlaces" style="color: inherit; text-decoration: none;">
  <h2>Enlaces</h2>
</a>
<ul>
<li><a href="src">src</a></li>
<li><a href="docs">docs</a></li>
<li><a href="tests">test</a></li>
</ul>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>